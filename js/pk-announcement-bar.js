(function($){"use strict";const barURL="https://qab.hextom.com/qab_get_bars?shop=perfectketo.myshopify.com";const bar=document.getElementById('announcementBar');const barMsg=document.createElement('span');const barBtn=document.createElement('a');let barId=null;if(!bar){return;}
fetch(barURL).then((response)=>{return response.json();}).then((data)=>{if(data.bars.length===0){return;}
const barConfig=data.bars[0];barId=barConfig.bar_id;bar.style.backgroundColor=barConfig.background_color;bar.style.color=barConfig.text_color;bar.style.paddingTop=`${barConfig.bar_padding}px`;bar.style.paddingBottom=`${barConfig.bar_padding}px`;barBtn.id='announcementBarButton';barBtn.role='button';barBtn.href=barConfig.button_link;barBtn.innerText=barConfig.button_text;barBtn.style.color=barConfig.button_text_color;barBtn.style.backgroundColor=barConfig.button_background_color;barMsg.id='announcementBarMessage';barMsg.innerHTML=barConfig.message.replace("{{button}}","");bar.appendChild(barMsg);bar.appendChild(barBtn);let btnShadowColor=window.getComputedStyle(barBtn).getPropertyValue('background-color');barBtn.style.setProperty('--announcementButtonShadow',btnShadowColor.replace(')',', .8)'));});barBtn.addEventListener('click',trackClick);function trackClick(e){e.preventDefault();fetch(`https://qab.hextom.com/qab_record_bar?shop=perfectketo.myshopify.com&bar_id=${barId}&event=click`).then((response)=>{return response.json();}).then((data)=>{}).finally(()=>{window.location.href=barBtn.href;});}})(jQuery);